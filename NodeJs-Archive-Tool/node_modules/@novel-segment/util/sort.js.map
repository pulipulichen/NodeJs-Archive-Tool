{"version":3,"file":"sort.js","sourceRoot":"","sources":["sort.ts"],"names":[],"mappings":"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","sourcesContent":["import naturalCompare from '@bluelovers/string-natural-compare';\nimport { array_unique } from 'array-hyper-unique';\nimport StrUtil = require('str-util');\nimport libTable from 'cjk-conv/lib/zh/table';\nimport { textList, slugify } from 'cjk-conv/lib/zh/table/list';\nimport UString from 'uni-string';\nimport { _re_cjk_conv } from 'regexp-helper/lib/cjk-conv';\n\n/**\n * @private\n */\nexport let _zhDictCompareTable = ((a: string[][], b: string[][]) =>\n{\n\treturn array_unique(a.map((value, index, array) =>\n\t{\n\t\treturn array_unique(value.reduce(function (c, d, currentIndex)\n\t\t{\n\t\t\tc.push(d);\n\t\t\tc.push(b[index][currentIndex]);\n\n\t\t\treturn c;\n\t\t}, [] as string[]))\n\t}));\n})([\n\t['一', '二', '两', '三', '四', '五', '六', '七', '八', '九', '十', '十', '零', '幾', '個', '百', '千', '萬', '億'],\n\t['初', '上', '中', '下', '左', '右'],\n\t['東', '南', '西', '北'],\n\t['大', '小'],\n\t['高', '低'],\n\t['長', '短', '粗', '細'],\n\t['內', '外'],\n\t['男', '女'],\n\t['前', '後'],\n\t['他', '她', '它', '我', '你', '吾', '汝'],\n\t['快', '慢'],\n\t['春', '夏', '秋', '冬'],\n\t['壹', '貳', '參', '肆', '伍', '陸', '柒', '捌', '玖', '拾', '什'],\n\t['劣', '優'],\n], [\n\t['一', '二', '两', '三', '四', '五', '六', '七', '八', '九', '十', '十', '零', '几', '个', '百', '千', '万', '亿'],\n\t['初', '上', '中', '下', '左', '右'],\n\t['东', '南', '西', '北'],\n\t['大', '小'],\n\t['高', '低'],\n\t['长', '短', '粗', '细'],\n\t['内', '外'],\n\t['男', '女'],\n\t['前', '后'],\n\t['他', '她', '它', '我', '你', '吾', '汝'],\n\t['快', '慢'],\n\t['春', '夏', '秋', '冬'],\n\t['壹', '贰', '参', '肆', '伍', '陆', '柒', '捌', '玖', '拾', '什'],\n\t['劣', '优'],\n]);\n\nexport let _zhDictCompareTable_chars = array_unique(_zhDictCompareTable.flat());\n\n//export const RE_ZH = /[\\u3400-\\u4DBF\\u4E00-\\u9FFF\\u{20000}-\\u{2FA1F}]/u;\nexport const RE_ZH = _re_cjk_conv('u', 'のと㊥㊦㊤');\n\nexport interface IFnCompare\n{\n\t(a: string, b: string): number\n}\n\n/**\n * 包裝排序比較函數\n */\nexport function zhDictCompareNew(failback?: IFnCompare): IFnCompare\nexport function zhDictCompareNew(options?: {\n\tfailback?: IFnCompare\n}): IFnCompare\nexport function zhDictCompareNew(options?: IFnCompare | {\n\tfailback?: IFnCompare\n}): IFnCompare\n{\n\tif (typeof options === 'function')\n\t{\n\t\toptions = { failback: options };\n\t}\n\n\tlet failback = (options = options || {}).failback;\n\n\tif (failback == null)\n\t{\n\t\tif (typeof naturalCompare.caseInsensitive === 'function')\n\t\t{\n\t\t\tfailback = naturalCompare.caseInsensitive\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfailback = (a, b) => naturalCompare(a, b, {\n\t\t\t\tcaseInsensitive: true\n\t\t\t});\n\t\t}\n\n\t}\n\n\treturn function zhDictCompare(a: string, b: string): number\n\t{\n\t\tlet len01 = UString.size(a);\n\t\tlet len02 = UString.size(b);\n\n\t\t/**\n\t\t * 優先排序單一字元\n\t\t */\n\t\tif ((len01 != len02) && (len01 === 1 || len02 === 1))\n\t\t{\n\t\t\treturn len01 - len02\n\t\t}\n\n\t\tlet _c = 0;\n\n\t\tlet _a0 = a[0];\n\t\tlet _b0 = b[0];\n\n\t\tlet _a: number;\n\t\tlet _b: number;\n\n\t\tlet aa = RE_ZH.test(a[0]);\n\t\tlet bb = RE_ZH.test(b[0]);\n\n\t\tif (aa && bb)\n\t\t{\n\t\t\tif (a.length != b.length && (a.length == 1 || b.length == 1))\n\t\t\t{\n\t\t\t\treturn a.length - b.length\n\t\t\t}\n\n\t\t\t_a = _zhDictCompareTable[0].indexOf(a[0]);\n\t\t\t_b = _zhDictCompareTable[0].indexOf(b[0]);\n\n\t\t\taa = _a != -1;\n\t\t\tbb = _b != -1;\n\n\t\t\tif (aa && !bb)\n\t\t\t{\n\t\t\t\treturn -1\n\t\t\t}\n\t\t\telse if (!aa && bb)\n\t\t\t{\n\t\t\t\treturn 1\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (aa && !bb)\n\t\t\t{\n\t\t\t\treturn 0\n\t\t\t}\n\t\t\telse if (!aa && bb)\n\t\t\t{\n\t\t\t\treturn -1\n\t\t\t}\n\t\t}\n\n\t\tif (_a0 != null)\n\t\t{\n\t\t\tlet len = a.length;\n\n\t\t\tfor (let i = 0; i < len; i++)\n\t\t\t{\n\t\t\t\tif (!a[i] || !b[i] || a[i] == null || b[i] == null)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse if (a[i] !== b[i])\n\t\t\t\t{\n\t\t\t\t\t_a0 = a[i];\n\t\t\t\t\t_b0 = b[i];\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (_zhDictCompareTable_chars.includes(_a0) && _zhDictCompareTable_chars.includes(_b0))\n\t\t{\n\t\t\tfor (let _arr of _zhDictCompareTable)\n\t\t\t{\n\t\t\t\t_a = _arr.indexOf(_a0);\n\t\t\t\t_b = _arr.indexOf(_b0);\n\n\t\t\t\tif (_a > -1 && _b > -1)\n\t\t\t\t{\n\t\t\t\t\t_c = (_a - _b) || 0;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn _c || failback(a, b);\n\t}\n}\n\n/**\n * 排序字典專用的比較函數\n */\nexport const zhDictCompare = zhDictCompareNew();\n\n/*\nexport function zhDictCompare(a: string, b: string): number\n{\n\tlet _c = 0;\n\n\tlet _a0 = a[0];\n\tlet _b0 = b[0];\n\n\tlet _a: number;\n\tlet _b: number;\n\n\tlet aa = RE_ZH.test(a[0]);\n\tlet bb = RE_ZH.test(b[0]);\n\n\tif (aa && bb)\n\t{\n\t\tif (a.length != b.length && (a.length == 1 || b.length == 1))\n\t\t{\n\t\t\treturn a.length - b.length\n\t\t}\n\n\t\t_a = _zhDictCompareTable[0].indexOf(a[0]);\n\t\t_b = _zhDictCompareTable[0].indexOf(b[0]);\n\n\t\taa = _a != -1;\n\t\tbb = _b != -1;\n\n\t\tif (aa && !bb)\n\t\t{\n\t\t\treturn -1\n\t\t}\n\t\telse if (!aa && bb)\n\t\t{\n\t\t\treturn 1\n\t\t}\n\t}\n\telse\n\t{\n\t\tif (aa && !bb)\n\t\t{\n\t\t\treturn 0\n\t\t}\n\t\telse if (!aa && bb)\n\t\t{\n\t\t\treturn -1\n\t\t}\n\t}\n\n\tif (_a0 != null)\n\t{\n\t\tlet len = a.length;\n\n\t\tfor (let i = 0; i < len; i++)\n\t\t{\n\t\t\tif (!a[i] || !b[i] || a[i] == null || b[i] == null)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (a[i] !== b[i])\n\t\t\t{\n\t\t\t\t_a0 = a[i];\n\t\t\t\t_b0 = b[i];\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (_zhDictCompareTable_chars.includes(_a0) && _zhDictCompareTable_chars.includes(_b0))\n\t{\n\t\tfor (let _arr of _zhDictCompareTable)\n\t\t{\n\t\t\t_a = _arr.indexOf(_a0);\n\t\t\t_b = _arr.indexOf(_b0);\n\n\t\t\tif (_a > -1 && _b > -1)\n\t\t\t{\n\t\t\t\t_c = (_a - _b) || 0;\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn _c || naturalCompare.caseInsensitive(a, b);\n}\n*/\n\nexport default exports as typeof import('./sort');\n"]}